# 用户注册页面添加验证问题实现计划

## 问题分析
根据用户需求，需要在注册页面添加验证问题表单项，用于后续密码找回验证。当前系统使用Node.js + SQLite，前端使用HTML/CSS/JavaScript。

## 实现计划

### 1. 数据库表结构更新
- 修改 `server/config/db.js` 中的用户表结构，添加两个新字段：
  - `security_question`：存储用户选择的验证问题
  - `security_answer`：存储加密后的验证答案

### 2. 后端API更新
- 更新 `server/controllers/userController.js` 中的注册验证规则，添加验证问题和答案的验证
- 修改 `server/models/userModel.js` 中的 `createUser` 方法，支持存储验证问题和答案
- 更新 `registerValidationRules` 函数，添加验证问题和答案的验证规则

### 3. 前端表单修改
- 修改 `public/register.html`，在验证码表单项上方添加验证问题表单项：
  - 添加一个下拉选择框，包含3-5个安全验证问题
  - 添加一个文本输入框，用于输入问题答案
  - 为必填字段添加红色"*"标识

### 4. 前端验证逻辑更新
- 修改 `public/register.js` 中的表单验证逻辑，添加验证问题和答案的验证：
  - 验证问题必须选择
  - 答案长度必须在4-20个字符之间
  - 添加实时验证

### 5. 前端样式调整
- 确保新增表单项的样式与页面整体设计风格保持一致
- 为必填字段添加红色"*"标识

## 具体实现细节

### 1. 数据库表结构更新
```sql
-- 在users表中添加验证问题和答案字段
ALTER TABLE users ADD COLUMN security_question VARCHAR(255) NOT NULL;
ALTER TABLE users ADD COLUMN security_answer VARCHAR(255) NOT NULL;
```

### 2. 安全验证问题列表
设计5个常见且具有个人辨识度的安全验证问题：
1. 您母亲的姓名是？
2. 您的出生地是？
3. 您的小学名称是？
4. 您的第一个宠物名字是？
5. 您的理想职业是？

### 3. 前端表单实现
- 添加下拉选择框：`<select id="securityQuestion" name="securityQuestion" required>`
- 添加答案输入框：`<input type="text" id="securityAnswer" name="securityAnswer" placeholder="请输入答案" required>`
- 为必填字段添加红色"*"：`<label for="username">用户名<span class="required">*</span></label>`

### 4. 后端加密存储
- 使用bcrypt对验证答案进行加密存储，与密码加密方式一致
- 在 `userModel.js` 中添加加密逻辑

## 预期效果
- 注册页面新增验证问题表单项，样式与整体设计一致
- 必填字段显示红色"*"标识
- 表单提交时验证问题和答案进行非空和格式验证
- 验证答案在数据库中加密存储
- 后端API能够正确处理新增参数

## 测试计划
- 测试注册表单提交，确保验证问题和答案能正确提交到后端
- 测试验证规则，确保非空和格式验证生效
- 测试数据库存储，确保验证问题和加密后的答案能正确存储
- 测试必填字段红色"*"标识显示正确